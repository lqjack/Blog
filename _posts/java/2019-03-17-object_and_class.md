---
layout: post
title: 对象与类
date: 2019-03-17 22:44
image: /assets/images/markdown.jpg
headerImage: false
tag:
- Java
star: true
category: blog
author: Jack
description: Java 核心卷1 对象与类
---

1, 使用场景：
	传统的结构程序设计通过一系列过程（即算法）来完成求解。针对规模较小的，采用过程的方式比较适合；大规模的软件开发更适合面向对象的方式来解决。主要的原因是的大问题分解为不同的对象，通过对象内部的行为（内部方法实现）与其他的协作（调用其他对象的方法）来完成复杂的业务需求。

	面向对象和方式核心是类设计，类称为对象模板，通过构造器产生新的对象。封装是将数据和行为组合在对象中，并针对调用者隐藏实现细节。核心是避免直接操作对象的数据（实体域），仅通过对象的方法进行交互。达到对象的复用和可靠性。另外，通过扩展已经存在的类来添加新的对象，扩展的新类包含被继承类的数据和方法（满足可见效的前提），仅需要添加部分的数据和方法来完成。

2, 类的特性：
类是构造对象的模版，由类的构造器创建对象实例。对象的封装是将数据和行为组合在一个包中，并对使用者隐藏了数据的实现形式。对象中数据称为实体域，操作数据过程称为方法。实例之间的交换就是通过对象之间方法的调用，引起内部数据的变化。

3, 对象包含三个特性：
* 对象行为：可以调用对象的哪些方法
* 对象状态：方法调用时，数据如何变化
* 对象标示：区分行为相同，数据不同的对象

4, 类之间的关联关系：
* 依赖：类中的方法操作类的方法
* 聚合：对象中包含其他对象
* 继承：一个类由另外一个类继承而来
		子类可以包含父类声明的方法或者属性（public,protected,package的可见性），同时子类也可以提供新方法覆盖父类中的定义。子类显示的调用父类的方法使用super+方法名。

5, 类的初始化：
* 要想使用对象，需要先构造，并指定初始状态，然后调用方法。对象变量没有实际包含对象，只是引用另一个对象。

* Java局部变量使用需要赋予初始值：方法在运行时会自动创建局部变量表、操作数栈等；其中局部变量表所需的内存空间在编译期间完成分配，不同的方法的生命周期不同，局部变量会重用局部变量表中的部分位置，这个方法需要在栈帧分配多大的局部变量空间是完全确定的，在方法运行期间不会改变局部变量表的大小。这句话就说明了局部变量在创建时就必须进行初始化以确定分配内存大小。

* Java堆存放所有对象的实例，几乎所有的对象实例都在这里分配内存。在hotspot虚拟机中，内存分配后，虚拟机需要将分配到的内存空间都初始化为零值。这一步操作保证了对象的实例字段在java代码中可以不赋初始值就直接使用，程序能访问到的这些字段的数据类型所对应的零值。

* 不要在构造器中定义与实例域重名的局部变量。不要返回引用可变对象的访问器方法（需要考虑clone)。

6, final 关键字：
final修饰的实体域，构建时必须初始化；构造器之行后，不能改进行修改。大都应用基本类型，或不可变类的域，可变考虑克隆对象。
final修饰的方法，不具有虚拟特性（即不是动态绑定）。
阻止继承关系（子类不能覆盖）；如果方法没有被覆盖，并且很短，编译器就会对其进行优化-》内联

7, static 关键字：
定义为static的域，每一个类中都包含一个这样的域；而每个对象对于所有的实体域都有自己的拷贝。
静态方法是一种不能向对象施加操作的方法，不具有this指针，不能在静态方法中访问实体域；但可以访问静态域。
静态工厂是静态方法的典型应用。

8, 方法调用
Java程序采用按值调用，也就是方法参数传递是通过拷贝，特别是不能修改传递给它的任何参数变量的内容。	

重载(overloading)：方法名称相同，参数不同。
多态（）：变量可以指向父类，也可以指向子类；一个变量可以指示多种实际类型的现象，在运行时能够自动选择调用哪个方法的现象称为动态绑定（1，编译器查看对象声明的类型和方法名，查找当前类中跟调用方相同名称以及超类中属性为public的同名方法；2，从中找到与调用方参数一致的方法；3，如果方法是static,final,private修饰方法，编译器就可以确定性的知道调用的方法【静态绑定】；4，采用动态绑定调用时，虚拟机一定调用与调用方最匹配的方法（从当前类开始，往超类中查询））。

9, 初始化的步骤
初始化数据域方法：
* 构造器
* 声明中指定
* 初始化块

调用构造器的步骤：数据域初始化为默认值（0，false，null），按照类生命中出现的次序，依次执行所有的初始化语句与初始化块，调用构造器。

对类的静态域进行初始化可以放在静态初始化块中。在类第一次加载时候，会执行静态域的初始化。

对象在使用内存资源之外，还依赖其他资源的。可以为类添加finalize，在JVM清理对象之前被调用。但是不要依赖这个方法回收资源，调用时候不确定。同时增加一次JVM标记回收的次数。可以考虑使用Runtime.addShutdownHook()。如果某个资源需要使用完毕立刻释放，需要手动完成。

10 包
* 使用包的主要原因是确保类名唯一性。
> 作用域：
** public：任何类可以访问
** private：只有定义的类可以访问
** 包：同一个包中所有方法访问
** protected: 本包和所有子类

10, 类设计技巧：
* 保证数据私有化
* 保证数据初始化
* 减少类中基础数据的使用
* 不是所有属性都需要访问器和更改器
* 指责过多的类分解为多个类
* 类名称和方法名称要体现指责。
